<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agent Architecture Comparison</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #0a0e14;
            color: #e6e6e6;
            padding: 20px;
        }

        .container {
            max-width: 1800px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            margin-bottom: 10px;
            color: #ff6b6b;
            font-size: 2.5em;
        }

        .subtitle {
            text-align: center;
            margin-bottom: 40px;
            color: #888;
            font-size: 1.1em;
        }

        .controls {
            background: #1a1f2e;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 30px;
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            align-items: center;
        }

        .control-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .control-group label {
            font-size: 0.85em;
            color: #888;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        select {
            background: #2d3548;
            color: #e6e6e6;
            border: 1px solid #3d4558;
            padding: 10px 15px;
            border-radius: 6px;
            font-size: 1em;
            cursor: pointer;
            min-width: 200px;
        }

        select:hover {
            border-color: #4a90e2;
        }

        .view-tabs {
            display: flex;
            gap: 10px;
        }

        .tab-btn {
            background: #2d3548;
            color: #e6e6e6;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.95em;
            transition: all 0.2s;
        }

        .tab-btn:hover {
            background: #3d4558;
        }

        .tab-btn.active {
            background: #ff6b6b;
            color: #fff;
        }

        .view {
            display: none;
        }

        .view.active {
            display: block;
        }

        .comparison-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .agent-card {
            background: #1a1f2e;
            border: 2px solid #2d3548;
            border-radius: 12px;
            padding: 25px;
        }

        .agent-card h2 {
            color: #4a90e2;
            margin-bottom: 10px;
        }

        .agent-card .description {
            color: #888;
            font-size: 0.9em;
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .section-title {
            color: #ff6b6b;
            font-size: 1.1em;
            margin: 20px 0 10px 0;
            border-bottom: 1px solid #2d3548;
            padding-bottom: 5px;
        }

        .component-list {
            list-style: none;
        }

        .component-list li {
            padding: 8px 0;
            display: flex;
            align-items: center;
            font-size: 0.9em;
        }

        .status-icon {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            margin-right: 10px;
            flex-shrink: 0;
        }

        .status-icon.present {
            background: #2ecc71;
        }

        .status-icon.absent {
            background: #e74c3c;
        }

        .comparison-table {
            background: #1a1f2e;
            border-radius: 12px;
            overflow: hidden;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th {
            background: #242938;
            padding: 15px;
            text-align: left;
            color: #4a90e2;
            font-weight: 600;
            border-bottom: 2px solid #2d3548;
        }

        td {
            padding: 12px 15px;
            border-bottom: 1px solid #2d3548;
            font-size: 0.9em;
        }

        tr:hover {
            background: #242938;
        }

        .check {
            color: #2ecc71;
            font-weight: bold;
        }

        .cross {
            color: #e74c3c;
            font-weight: bold;
        }

        .partial {
            color: #f39c12;
            font-weight: bold;
        }

        .radar-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 30px;
            margin-top: 30px;
        }

        .radar-card {
            background: #1a1f2e;
            padding: 25px;
            border-radius: 12px;
            border: 2px solid #2d3548;
        }

        .radar-card h3 {
            color: #4a90e2;
            margin-bottom: 20px;
            text-align: center;
        }

        .feature-list {
            margin-top: 20px;
        }

        .feature-list h4 {
            color: #ff6b6b;
            font-size: 0.95em;
            margin-bottom: 10px;
        }

        .feature-list ul {
            list-style: none;
        }

        .feature-list li {
            padding: 5px 0;
            padding-left: 20px;
            position: relative;
            font-size: 0.85em;
            color: #b0b0b0;
        }

        .feature-list li:before {
            content: "â†’";
            position: absolute;
            left: 0;
            color: #4a90e2;
        }

        .patterns {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .pattern-badge {
            background: #2d3548;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.8em;
            color: #4a90e2;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸ¦ž Agent Architecture Comparison</h1>
        <p class="subtitle">Visual comparison framework using reified hypergraph ontology</p>

        <div class="controls">
            <div class="control-group">
                <label>Primary Agent</label>
                <select id="agent1-select">
                    <option value="openclaw">OpenClaw</option>
                    <option value="autogpt">AutoGPT</option>
                    <option value="claude_web">Claude.ai (Web)</option>
                    <option value="minimal_agent">Minimal Agent</option>
                </select>
            </div>
            <div class="control-group">
                <label>Compare With</label>
                <select id="agent2-select">
                    <option value="autogpt">AutoGPT</option>
                    <option value="openclaw">OpenClaw</option>
                    <option value="claude_web">Claude.ai (Web)</option>
                    <option value="minimal_agent">Minimal Agent</option>
                </select>
            </div>
            <div class="view-tabs">
                <button class="tab-btn active" onclick="switchView('overview')">Overview</button>
                <button class="tab-btn" onclick="switchView('comparison')">Side-by-Side</button>
                <button class="tab-btn" onclick="switchView('radar')">Coverage Radar</button>
            </div>
        </div>

        <div id="overview-view" class="view active">
            <div class="comparison-grid" id="agent-cards">
            </div>
        </div>

        <div id="comparison-view" class="view">
            <div class="comparison-table">
                <table id="comparison-table">
                </table>
            </div>
        </div>

        <div id="radar-view" class="view">
            <div class="radar-container" id="radar-charts">
            </div>
        </div>
    </div>

    <script>
        let agentsData = null;
        let agent1 = 'openclaw';
        let agent2 = 'autogpt';

        // Load data
        fetch('agent-instances.json')
            .then(response => response.json())
            .then(data => {
                agentsData = data.agents;
                renderAll();
            });

        document.getElementById('agent1-select').addEventListener('change', (e) => {
            agent1 = e.target.value;
            renderAll();
        });

        document.getElementById('agent2-select').addEventListener('change', (e) => {
            agent2 = e.target.value;
            renderAll();
        });

        function switchView(viewName) {
            document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));

            document.getElementById(`${viewName}-view`).classList.add('active');
            event.target.classList.add('active');
        }

        function renderAll() {
            if (!agentsData) return;
            renderOverview();
            renderComparison();
            renderRadar();
        }

        function renderOverview() {
            const container = document.getElementById('agent-cards');
            container.innerHTML = '';

            [agent1, agent2].forEach(agentId => {
                const agent = agentsData[agentId];
                const card = document.createElement('div');
                card.className = 'agent-card';

                const extensionCount = Object.values(agent.extensions)
                    .filter(ext => ext.present).length;

                const extensionsHtml = Object.entries(agent.extensions)
                    .filter(([_, ext]) => ext.present)
                    .map(([key, ext]) => `
                        <li>
                            <div class="status-icon present"></div>
                            <span><strong>${formatKey(key)}:</strong> ${ext.implementation || 'Present'}</span>
                        </li>
                    `).join('');

                card.innerHTML = `
                    <h2>${agent.name}</h2>
                    <p class="description">${agent.description}</p>

                    <div class="section-title">Core Components (4/4)</div>
                    <ul class="component-list">
                        <li><div class="status-icon present"></div>Perception</li>
                        <li><div class="status-icon present"></div>Working Memory</li>
                        <li><div class="status-icon present"></div>Reasoning</li>
                        <li><div class="status-icon present"></div>Action</li>
                    </ul>

                    <div class="section-title">Extensions (${extensionCount}/16)</div>
                    <ul class="component-list">
                        ${extensionsHtml}
                    </ul>

                    <div class="section-title">Architectural Patterns</div>
                    <div class="patterns">
                        ${agent.patterns.map(p => `<span class="pattern-badge">${p}</span>`).join('')}
                    </div>

                    <div class="feature-list">
                        <h4>Unique Features</h4>
                        <ul>
                            ${agent.unique_features.map(f => `<li>${f}</li>`).join('')}
                        </ul>
                    </div>
                `;

                container.appendChild(card);
            });
        }

        function renderComparison() {
            const table = document.getElementById('comparison-table');
            const a1 = agentsData[agent1];
            const a2 = agentsData[agent2];

            const allExtensions = new Set([
                ...Object.keys(a1.extensions),
                ...Object.keys(a2.extensions)
            ]);

            let html = `
                <thead>
                    <tr>
                        <th>Component</th>
                        <th>${a1.name}</th>
                        <th>${a2.name}</th>
                        <th>Difference</th>
                    </tr>
                </thead>
                <tbody>
                    <tr style="background: #242938;">
                        <td colspan="4"><strong>CORE COMPONENTS</strong></td>
                    </tr>
            `;

            // Core components
            ['perception', 'working_memory', 'reasoning', 'action'].forEach(comp => {
                html += `
                    <tr>
                        <td>${formatKey(comp)}</td>
                        <td><span class="check">âœ“</span> ${a1.core[comp].implementation}</td>
                        <td><span class="check">âœ“</span> ${a2.core[comp].implementation}</td>
                        <td>Both present</td>
                    </tr>
                `;
            });

            html += `
                <tr style="background: #242938;">
                    <td colspan="4"><strong>EXTENSIONS</strong></td>
                </tr>
            `;

            // Extensions
            Array.from(allExtensions).forEach(ext => {
                const e1 = a1.extensions[ext];
                const e2 = a2.extensions[ext];

                const status1 = e1?.present ? 'check' : 'cross';
                const status2 = e2?.present ? 'check' : 'cross';
                const symbol1 = e1?.present ? 'âœ“' : 'âœ—';
                const symbol2 = e2?.present ? 'âœ“' : 'âœ—';

                let diff = '';
                if (e1?.present && !e2?.present) {
                    diff = `Only ${a1.name}`;
                } else if (!e1?.present && e2?.present) {
                    diff = `Only ${a2.name}`;
                } else if (e1?.present && e2?.present) {
                    diff = 'Both have';
                } else {
                    diff = 'Neither has';
                }

                html += `
                    <tr>
                        <td>${formatKey(ext)}</td>
                        <td>
                            <span class="${status1}">${symbol1}</span>
                            ${e1?.implementation || e1?.notes || 'Not present'}
                        </td>
                        <td>
                            <span class="${status2}">${symbol2}</span>
                            ${e2?.implementation || e2?.notes || 'Not present'}
                        </td>
                        <td>${diff}</td>
                    </tr>
                `;
            });

            html += '</tbody>';
            table.innerHTML = html;
        }

        function renderRadar() {
            const container = document.getElementById('radar-charts');
            container.innerHTML = '';

            [agent1, agent2].forEach(agentId => {
                const agent = agentsData[agentId];

                const card = document.createElement('div');
                card.className = 'radar-card';
                card.innerHTML = `
                    <h3>${agent.name}</h3>
                    <canvas id="radar-${agentId}" width="400" height="400"></canvas>
                `;
                container.appendChild(card);

                // Calculate coverage by category
                const categories = {
                    'Core': 4, // Always 4/4
                    'Memory': ['episodic_memory', 'semantic_memory', 'procedural_memory'],
                    'Processing': ['planning', 'temporal_reasoning'],
                    'Control': ['attention', 'goal_management', 'error_handling', 'context_management'],
                    'Meta': ['meta_cognition', 'learning', 'explanation'],
                    'Social': ['social_cognition']
                };

                const scores = {
                    'Core': 100
                };

                Object.entries(categories).forEach(([category, components]) => {
                    if (category === 'Core') return;

                    const total = components.length;
                    const present = components.filter(c => agent.extensions[c]?.present).length;
                    scores[category] = (present / total) * 100;
                });

                const ctx = document.getElementById(`radar-${agentId}`).getContext('2d');
                new Chart(ctx, {
                    type: 'radar',
                    data: {
                        labels: Object.keys(scores),
                        datasets: [{
                            label: 'Coverage %',
                            data: Object.values(scores),
                            backgroundColor: 'rgba(74, 144, 226, 0.2)',
                            borderColor: 'rgba(74, 144, 226, 1)',
                            borderWidth: 2,
                            pointBackgroundColor: 'rgba(74, 144, 226, 1)',
                            pointBorderColor: '#fff',
                            pointHoverBackgroundColor: '#fff',
                            pointHoverBorderColor: 'rgba(74, 144, 226, 1)'
                        }]
                    },
                    options: {
                        scales: {
                            r: {
                                beginAtZero: true,
                                max: 100,
                                ticks: {
                                    color: '#888',
                                    backdropColor: 'transparent'
                                },
                                grid: {
                                    color: '#2d3548'
                                },
                                pointLabels: {
                                    color: '#e6e6e6',
                                    font: {
                                        size: 12
                                    }
                                }
                            }
                        },
                        plugins: {
                            legend: {
                                display: false
                            }
                        }
                    }
                });
            });
        }

        function formatKey(key) {
            return key.split('_').map(word =>
                word.charAt(0).toUpperCase() + word.slice(1)
            ).join(' ');
        }
    </script>
</body>
</html>
